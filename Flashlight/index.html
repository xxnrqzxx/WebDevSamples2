<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Flashlight</title>
        <style>
            body {
                overflow: hidden;
                margin: 0;
            }

            ::-webkit-scrollbar {
                width: 0 !important;
                height: 0 !important;
            }

            ::-moz-scrollbar {
                width: 0 !important;
                height: 0 !important;
            }

            ::-ms-scrollbar {
                width: 0 !important;
                height: 0 !important;
            }

            .up {
            position: fixed;
            z-index: 5;
            width: 50px;
            height: 30px;
            background-color: red;
            opacity: 0.3;
            margin: 0;
            top: 0%;
            left: 50%
        }

        .left {
            z-index: 5;
            opacity: 0.3;
            position: fixed;
            width: 30px;
            height: 50px;
            background-color: red;
            margin: 0;
            top: 50%;
            left: 0%;
        }

        .down {
            z-index: 5;
            opacity: 0.3;
            position: fixed;
            width: 50px;
            height: 30px;
            background-color: red;
            margin: 0;
            top: 97%;
            left: 50%;
        }

        .right {
            z-index: 5;
            opacity: 0.3;
            position: fixed;
            width: 50px;
            height: 50px;
            background-color: red;
            margin: 0;
            top: 50%;
            left: 98%;
        }

        .topLeft {
            z-index: 5;
            position: fixed;
            width: 50px;
            height: 30px;
            background-color: red;
            opacity: 0.3;
            margin: 0;
            top: 0%;
            left: 0%
        }

        .topRight {
            z-index: 5;
            position: fixed;
            width: 50px;
            height: 30px;
            background-color: red;
            opacity: 0.3;
            margin: 0;
            top: 0%;
            left: 98%
        }

        .botLeft {
            z-index: 5;
            opacity: 0.3;
            position: fixed;
            width: 50px;
            height: 30px;
            background-color: red;
            margin: 0;
            top: 97%;
            left: 0%;
        }

        .botRight {
            z-index: 5;
            opacity: 0.3;
            position: fixed;
            width: 50px;
            height: 30px;
            background-color: red;
            margin: 0;
            top: 97%;
            left: 98%;
        }

            .light {
                z-index: 2;
                width: 2000px;
                height: 2000px;
                position: absolute;
                margin: 0;
                background: url('darkcorridor.jpg');
                background-repeat: no-repeat;
                background-size: 2000px 2000px;
                clip-path:circle(500px at 100px 100px);
                filter: brightness(100%);
                display: none;
            }

            .light-lens {
                z-index: 3;
                width: 2000px;
                height: 2000px;
                position: absolute;
                margin: 0;
                background: url('darkcorridor.jpg');
                background-repeat: no-repeat;
                background-size: 2000px 2000px;
                clip-path:circle(450px at 100px 100px);
                filter: brightness(150%);
                display: none;
            }

            .light-lens2 {
                z-index: 3;
                width: 2000px;
                height: 2000px;
                position: absolute;
                margin: 0;
                background: url('darkcorridor.jpg');
                background-repeat: no-repeat;
                background-size: 2000px 2000px;
                clip-path:circle(250px at 100px 100px);
                filter: brightness(200%);
                display: none;
            }

            .light.active, .light-lens.active, .light-lens2.active {
                display: block;
            }

            .corridor {
                width: 2000px;
                height: 2000px;
                position: absolute;
                margin: 0;
                background: url('darkcorridor.jpg');
                background-repeat: no-repeat;
                background-size: 2000px 2000px;
                filter: brightness(40%);
            }

            .easteregg {
                z-index: 5;
                margin: 700px 500px;
                width: 30px;
                height: 30px;
                position: absolute;
                cursor: pointer;
                background-color: rgba(255, 255, 0, 0.05);
                border-radius: 50px;
                /* border: 2px solid red; */
            }

            .instructions {
                position: fixed;
                color: white;
                z-index: 5;
                border: 1px solid white;
                padding: 10px;
                border-radius: 15px;
                left: 80%;
                top: 80%;
                transform: translate(-80%, -80%);
                text-align: center;
            }


        </style>
    </head>
    <body>

        <div class="instructions">
            <p>Press the Left Mouse Button to open your flashlight. Hover over the Red boxes to Pan the camera to each side.</p>
        </div>

        <div>
            <audio src="bangingSound.mp3" class="banging"></audio>
            <audio src="doorCreak.mp3" class="doorCreak"></audio>
            <audio class="knock" src="knocking.mp3"></audio>
            <audio src="flashlightClick.mp3" class="flashClick"></audio>
            <audio src="scream.mp3" class="scream"></audio>
        </div>
        <div class="corridor"></div>
        <div class="light"></div>
        <div class="light-lens"></div>
        <div class="light-lens2"></div>
        <div class="easteregg"></div>

        <div class="up"></div>
        <div class="left"></div>
        <div class="down"></div>
        <div class="right"></div>
        <div class="topLeft"></div>
        <div class="topRight"></div>
        <div class="botLeft"></div>
        <div class="botRight"></div>

        <script>
            const corridor = document.querySelector('.corridor');
            const banging = document.querySelector('.banging');
            const doorCreak = document.querySelector('.doorCreak');
            const click = document.querySelector('.flashClick');
            const knock = document.querySelector('.knock');
            const scream = document.querySelector('.scream');
            const light = document.querySelector('.light');
            const lightLens = document.querySelector('.light-lens');
            const lightLens2 = document.querySelector('.light-lens2');
            const easterEgg = document.querySelector('.easteregg');

            var refreshInterval;

            window.addEventListener('DOMContentLoaded', function() {
                let x = Math.floor(Math.random()*1500) + 'px';
                let y = Math.floor(Math.random()*700) + 'px';
                
                easterEgg.style['margin'] = y+' '+x;
            });

            window.addEventListener('mouseover', function(e){
                const element = e.target;
               
                

                
                if(element.classList.contains('up')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(0, -1);
                    }, 0.01);
                } else if (element.classList.contains('left')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(-1, 0);
                    }, 0.01);
                } else if (element.classList.contains('down')) {
                  
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(0, 1);
                    }, 0.01);
                }  else if (element.classList.contains('right')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(1, 0);
                    }, 0.01);
                } else if (element.classList.contains('topLeft')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(-1, -1);
                    }, 0.01);
                } else if (element.classList.contains('topRight')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(1, -1);
                    }, 0.01);
                } else if (element.classList.contains('botLeft')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(-1, 1);
                    }, 0.01);
                } else if (element.classList.contains('botRight')) {
                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(function(){
                        scrollBy(1, 1);
                    }, 0.01);
                } else {
                    clearInterval(refreshInterval);
                }
            });


            window.addEventListener('mousemove', function(e){
                let x = e.offsetX+'px';
                let y = e.offsetY+'px';


                console.log(x, y);

                

                light.style['clip-path'] = 'circle(500px at '+x+' '+y+')';
                lightLens.style['clip-path'] = 'circle(450px at '+x+' '+y+')';
                lightLens2.style['clip-path'] = 'circle(250px at '+x+' '+y+')';
            });

            window.addEventListener('click', function(e){
                if(!e.target.classList.contains('easteregg')) {
                    if(!light.classList.contains('active')) {
                        light.className += ' active';
                        lightLens.className += ' active';
                        lightLens2.className += ' active';
                        click.play();

                    } else {
                        light.classList.remove('active');
                        lightLens.classList.remove('active');
                        lightLens2.classList.remove('active');
                        click.play();
                    }
                }
            });

            easterEgg.addEventListener('click', function(){
                knock.play();
                setTimeout (function(){
                    banging.play();
                    doorCreak.play();
                }, 3700);
                setTimeout(function(){
                    window.location.href = 'hello.html';
                }, 5000);
                
            });

        </script>
    </body>
</html>